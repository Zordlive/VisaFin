{
  "providers": ["python"],
  "buildImage": "ghcr.io/railwayapp/nixpacks:ubuntu",
  "phases": {
    "setup": {
      "nixPkgs": ["python39"],
      "aptPkgs": []
    },
    "install": {
      "cmds": ["pip install --upgrade pip", "pip install -r requirements.txt"]
    },
    "build": {
      "cmds": ["python manage.py collectstatic --noinput --clear || true"]
    }
  },
  "start": {
    "cmd": "python manage.py migrate --noinput && gunicorn invest_backend.wsgi:application --bind 0.0.0.0:$PORT --workers 4 --timeout 60"
  }
}
